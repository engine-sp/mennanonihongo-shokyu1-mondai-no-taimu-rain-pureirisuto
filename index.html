
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大家的日本語 初級I 改訂版 線上音檔 逐題閱聽</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body::before,body::after{
            content: "";
            display: block;
            width: 100%;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
        }
        ?*body::before{
            background-image: url("https://www.dahhsin.com.tw/uploadfile/fileproduct_list/P1603100001f8ee/PRDPIC/650_45_f91d942cbd6a5fb835ac12117ed2cd3c_1748892376.jpg");
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        body::after{
            backdrop-filter: blur(10px);
            background-color: rgba(243 244 246 / 0.5);
        }*/

        /*ios fix*/
        .content-container {
            position: relative; /* Ensure content appears above the background */
            z-index: 1;
            /* Add your content styles */
        }
        .fixed-background-container,.fixed-background-container-after{
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .fixed-background-container {
            background-image: url("https://www.dahhsin.com.tw/uploadfile/fileproduct_list/P1603100001f8ee/PRDPIC/650_45_f91d942cbd6a5fb835ac12117ed2cd3c_1748892376.jpg");
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            z-index: -1; /* Place it behind other content */
        }
        .fixed-background-container-after{
            backdrop-filter: blur(10px);
            background-color: rgba(243 244 246 / 0.5);
        }
        .text-effR3Df{
            position: relative;
            z-index: 2;
        }
        .text-linear-Ae3z{
            background: linear-gradient(to left,
            #a8aaa7, #d5d7d6, #fff, #d5d7d6, #a8aaa7);
            background: -webkit-linear-gradient(to left,
            #a8aaa7, #d5d7d6, #fff, #d5d7d6, #a8aaa7);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
        }
        .text-effR4Df{
            text-shadow: 0 3px 5px #777,0 2px 2px #555,0 0 1px #444;
            z-index: 1;
            position: absolute;
            margin:auto;
            left:0;right:0;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <div class="content-container"><div class="fixed-background-container"></div><div class="fixed-background-container-after"></div></div>
    <div id="container" class="max-w-md mx-auto my-8 p-6 pb-24 bg-white rounded-lg shadow-md">
        <h1 class="text-3xl text-center font-black mb-6 border-b pb-4 relative"><span class="text-effR4Df js-cloneText" data-text="大家的日本語 初級I 改訂版<br/>線上音檔 逐題閱聽"></span><span class="text-effR3Df"><span class="text-linear-Ae3z">大家的日本語 初級I 改訂版</span><br/><span class="text-linear-Ae3z">線上音檔 逐題閱聽</span></span></h1>
        <div class="text-center">
            <div class="inline-block text-left">
                <p class="mb-2 text-sm font-medium">本頁面資料引用自「<a class="text-blue-600" href="https://www.dahhsin.com.tw/bookIntro.php?lv01_type=minna-text-book&prd_id=A151">大家的日本語 初級I 改訂版</a>」提供的<a class="text-blue-600" href="https://www.dahhsin.com.tw/bookIntro_vw01.php?vw01_type=voice&prod_serialid=P1603100001f8ee">線上音檔</a>中「問題」的部分，由於每個音檔有很多問題可以聽，但如果要單題重覆閱聽就不是很方便。</p>
                <p class="mb-2 text-sm font-medium">為了改善此狀況，就以人工方式，依照時間軸逐題建立列表，這樣就能方便單題重覆閱聽。</p>
                <p class="mb-5 text-sm font-medium">需要注意的是，音檔來源自<a class="text-blue-600" href="https://www.dahhsin.com.tw/">大新書局官方網站</a>，如果官方網站更動了音檔，則此列表就可能會失效或不準確。</p>
            </div>
        </div>
        
        <div id="playlist"></div>
    </div>

    <audio id="audio-player" controls class="fixed bottom-0 left-0 w-full bg-gray-100/80 backdrop-blur-sm p-3 border-t border-gray-200 shadow-t-lg z-50"></audio>

    <script src="question.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const audioPlayer = document.getElementById('audio-player');
            const playlistContainer = document.getElementById('playlist');
            let currentEndTime = 0;
            let currentStartTime = 0;

            // 建立播放列表
            questions.forEach(lesson => {
                const lessonDiv = document.createElement('div');
                lessonDiv.className = 'mb-8';
                
                const lessonHeader = document.createElement('div');
                lessonHeader.className = 'flex items-center justify-between mb-4';

                const lessonTitle = document.createElement('h2');
                lessonTitle.className = 'text-2xl font-semibold text-gray-700';
                lessonTitle.textContent = lesson.title;
                
                const playAllButton = document.createElement('button');
                playAllButton.className = 'px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 shadow-sm';
                playAllButton.textContent = '聽取全部的題目';
                playAllButton.onclick = () => {
                    playSegment(lesson.url, 0, 0);
                };

                lessonHeader.appendChild(lessonTitle);
                lessonHeader.appendChild(playAllButton);
                lessonDiv.appendChild(lessonHeader);

                const questionsContainer = document.createElement('div');
                questionsContainer.className = 'space-y-2';
                lesson.questions.forEach(subQuestion => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'flex items-center justify-between p-3 rounded-lg hover:bg-gray-50';

                    const titleSpan = document.createElement('span');
                    titleSpan.className = 'text-gray-800';
                    titleSpan.textContent = subQuestion.title;

                    const playButton = document.createElement('button');
                    playButton.className = 'w-20 text-center px-3 py-1 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-indigo-500';
                    playButton.textContent = '▶ Play';
                    playButton.onclick = () => {
                        playSegment(lesson.url, subQuestion.startTime, subQuestion.endTime);
                    };

                    itemDiv.appendChild(titleSpan);
                    itemDiv.appendChild(playButton);
                    questionsContainer.appendChild(itemDiv);
                });
                lessonDiv.appendChild(questionsContainer);

                playlistContainer.appendChild(lessonDiv);
            });

            function playSegment(url, startTime, endTime) {
                if (audioPlayer.currentSrc.indexOf(encodeURI(url)) === -1) {
                    audioPlayer.src = url;
                }
                
                currentStartTime = startTime;
                currentEndTime = endTime;

                audioPlayer.currentTime = startTime;
                audioPlayer.play();
            }

            audioPlayer.addEventListener('timeupdate', () => {
                if (currentEndTime > 0 && audioPlayer.currentTime >= currentEndTime) {
                    audioPlayer.pause();
                    audioPlayer.currentTime = currentStartTime;
                    currentEndTime = 0;
                }
            });

            //標題陰影效果
            const cloneText=document.querySelector(".js-cloneText");
            cloneText.innerHTML=cloneText.dataset.text;
        });
    </script>
    <!-- <script src="dev-tools.js"></script> -->
</body>
</html>
